{"version":3,"sources":["assets/css/HomePage.module.css","components/RaceList.jsx","assets/images/aragorn.png","assets/images/legolas.png","assets/images/frodo.png","assets/images/gimli.png","pages/HomePage.jsx","api/heroesAPI.js","store/heroes-reducer.js","App.js","store/store.jsx","index.js","assets/css/RaceList.module.css"],"names":["module","exports","RaceList","race","image","className","styles","container","length","head","src","alt","map","el","itemContainer","name","buttons","change","delete","id","add","HomePage","heroes","useSelector","state","elfs","filter","char","dworfs","humans","hobbits","homeContainer","legolas","gimli","aragorn","frodo","api","host","port","this","_url","_subscribers","_messageHandler","bind","_openHandler","_reconnect","_ws","WebSocket","onopen","onmessage","onclose","removeEventListener","close","console","log","e","newMessages","JSON","parse","data","forEach","subs","send","cmd","callback","push","setTimeout","disconnect","connect","RECEIVE_HEROES","initialState","_unsubscribe","subscribe","dispatch","API","type","payload","receive","App","useDispatch","useEffect","path","render","root","combineReducers","action","store","createStore","applyMiddleware","thunkMiddleware","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.64067ad2.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"homeContainer\":\"HomePage_homeContainer__b99X2\"};","import React from 'react';\r\nimport styles from '../assets/css/RaceList.module.css';\r\n\r\nexport const RaceList = ({race, image}) => {\r\n\r\n    return (\r\n        <div className={styles.container}>\r\n\r\n            {(!!race.length && image) && <div className={styles.head}>\r\n            <h1>{`${race[0].race}s`}</h1>\r\n            <img src={image} alt={''}/>\r\n            </div>}\r\n\r\n            {!!race.length && race.map(el =>\r\n                <div key={el.id} className={styles.itemContainer}>\r\n                    <span>{el.name}</span>\r\n                    <div className={styles.buttons}>\r\n                        <button className={styles.change}>Change name</button>\r\n                        <button className={styles.delete}>Delete</button>\r\n                    </div>\r\n                </div>\r\n            )}\r\n            <button className={styles.add}>+ Add</button>\r\n        </div>\r\n    );\r\n};","export default __webpack_public_path__ + \"static/media/aragorn.cb820518.png\";","export default __webpack_public_path__ + \"static/media/legolas.2bbb9ab4.png\";","export default __webpack_public_path__ + \"static/media/frodo.a37e041a.png\";","export default __webpack_public_path__ + \"static/media/gimli.a99a7c01.png\";","import React from 'react';\r\nimport styles from '../assets/css/HomePage.module.css';\r\nimport {useSelector} from \"react-redux\";\r\nimport {RaceList} from \"../components/RaceList\";\r\nimport aragorn from '../assets/images/aragorn.png';\r\nimport legolas from '../assets/images/legolas.png';\r\nimport frodo from '../assets/images/frodo.png';\r\nimport gimli from '../assets/images/gimli.png';\r\n\r\nexport const HomePage = () => {\r\n    const heroes = useSelector(state => state.heroes.heroes);\r\n\r\n    const elfs = heroes.filter(char => char.race === 'Elf');\r\n    const dworfs = heroes.filter(char => char.race === 'Dworf');\r\n    const humans = heroes.filter(char => char.race === 'Human');\r\n    const hobbits = heroes.filter(char => char.race === 'Hobbit');\r\n\r\n    return (\r\n        <div className={styles.homeContainer}>\r\n            {!!heroes.length ? <>\r\n            <RaceList race={elfs} image={legolas}/>\r\n            <RaceList race={dworfs} image={gimli}/>\r\n            <RaceList race={humans} image={aragorn}/>\r\n            <RaceList race={hobbits} image={frodo}/>\r\n            </> : 'Loading...'}\r\n        </div>\r\n    );\r\n};","export class API {\r\n    constructor(host, port) {\r\n        this._url = `ws://${host}:${port}`;\r\n        this._subscribers = [];\r\n        this._messageHandler = this._messageHandler.bind(this);\r\n        this._openHandler = this._openHandler.bind(this);\r\n        this._reconnect = this._reconnect.bind(this);\r\n    }\r\n\r\n    connect() {\r\n        this._ws = new WebSocket(this._url);\r\n        this._ws.onopen = this._openHandler;\r\n        this._ws.onmessage = this._messageHandler;\r\n        this._ws.onclose = this._reconnect;\r\n    }\r\n\r\n    disconnect() {\r\n        if (!this._ws) {\r\n            return\r\n        }\r\n        this._ws.removeEventListener('message', this._messageHandler);\r\n        this._ws.removeEventListener('open', this._openHandler);\r\n        this._ws.removeEventListener('close', this._reconnect);\r\n        this._ws.close();\r\n        this._ws = null;\r\n        console.log('ws closed')\r\n    }\r\n\r\n    _messageHandler(e) {\r\n        const newMessages = JSON.parse(e.data);\r\n        this._subscribers.forEach(subs => subs(newMessages));\r\n    }\r\n\r\n    _openHandler() {\r\n        console.log('ws open');\r\n        this._ws.send({cmd: 'get_list'});\r\n    }\r\n\r\n    subscribe(callback) {\r\n        this._subscribers.push(callback);\r\n        return () => this._subscribers = this._subscribers.filter(subs => subs !== callback);\r\n    }\r\n\r\n    _reconnect() {\r\n        return setTimeout(() => {\r\n            console.log('reconnect');\r\n            this.disconnect();\r\n            this.connect();\r\n        }, 3000);\r\n    }\r\n}\r\n\r\nconst api = new API('testapi.marit.expert', '3004');\r\napi.connect();\r\nexport default api;\r\n","import API from \"../api/heroesAPI\";\r\n\r\nconst RECEIVE_HEROES = 'APP/HEROES_REDUCER/RECEIVE_HEROES';\r\n\r\nconst initialState = {\r\n    heroes: [],\r\n};\r\n\r\nexport const heroesReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case RECEIVE_HEROES: {\r\n            return { ...state, heroes: action.payload}\r\n        }\r\n        default: return state\r\n    }\r\n};\r\n\r\n\r\nconst receive = (heroes) => {\r\n    return {\r\n        type: RECEIVE_HEROES,\r\n        payload: heroes\r\n    }\r\n};\r\n\r\nlet _unsubscribe = null;\r\n\r\nexport const subscribe = () => dispatch => {\r\n    _unsubscribe = API.subscribe((heroes) => {\r\n        dispatch(receive(heroes));\r\n    })\r\n};\r\n\r\nexport const unsubscribe = () => dispatch => {\r\n    if (_unsubscribe){\r\n        _unsubscribe();\r\n        _unsubscribe = null;\r\n    }\r\n    API.disconnect();\r\n};\r\n\r\nexport const connectToWS = () => {\r\n    API.connect()\r\n};\r\n","import React, { useEffect } from 'react';\nimport './App.css';\nimport {BrowserRouter, Route} from \"react-router-dom\";\nimport {HomePage} from \"./pages/HomePage\";\nimport {useDispatch} from \"react-redux\";\nimport {connectToWS, subscribe, unsubscribe} from \"./store/heroes-reducer\";\n\nexport const App = () => {\n\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        dispatch(connectToWS());\n        dispatch(subscribe());\n        return () => dispatch(unsubscribe());\n    }, [dispatch]);\n\n    return (\n        <BrowserRouter>\n            <div className=\"app\">\n                <Route path={'/'} render={() => <HomePage/>}>\n                </Route>\n            </div>\n        </BrowserRouter>\n    );\n};","import {applyMiddleware, combineReducers, createStore} from 'redux';\r\nimport thunkMiddleware from 'redux-thunk';\r\nimport {heroesReducer} from \"./heroes-reducer\";\r\n\r\nconst root = combineReducers({\r\n    heroes: heroesReducer,\r\n});\r\n\r\nexport const store = createStore(root, applyMiddleware(thunkMiddleware));","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from './App';\nimport { store } from './store/store';\nimport {Provider} from \"react-redux\";\n\nReactDOM.render(\n    <Provider store={store}>\n    <App/>\n    </Provider>,\n  document.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"RaceList_container__3RvWr\",\"head\":\"RaceList_head__1wEyX\",\"itemContainer\":\"RaceList_itemContainer__Px3Lr\",\"buttons\":\"RaceList_buttons__1xGe_\",\"change\":\"RaceList_change__3Ci6Q\",\"delete\":\"RaceList_delete__2l8b4\",\"add\":\"RaceList_add__3_ACR\"};"],"sourceRoot":""}